!function(e,t,i,o,n,a,l,r){"use strict";function s(e){return a.getMessage("APEXIR_"+e)}function c(e){var t=s(e),i=[t].concat(Array.prototype.slice.call(arguments,1));return a.formatNoEscape.apply(this,i)}function _(e){return"#"+t.escapeCSS(e)}var h="a-IRR",d="a-IRR-sequenceNumber",u="ui-button--hot",g="is-active",p="REPORT",f="GROUP_BY",m="PIVOT",E="CHART",R="SHOW_COLUMN",v="SHOW_FILTER",T="SHOW_HIGHLIGHT",I="SHOW_ORDERING",w="SHOW_CTRL_BREAK",b="SHOW_COMPUTATION",O="SHOW_AGGREGATE",C="SHOW_CHART",D="SHOW_GROUP_BY",k="SHOW_GROUP_BY_SORT",A="SHOW_PIVOT",S="SHOW_PIVOT_SORT",L="SHOW_FLASHBACK",y="SHOW_RENAME",G="SHOW_DELETE",P="SHOW_SAVE_DEFAULT",x="SHOW_RENAME_DEFAULT",N="SHOW_DELETE_DEFAULT",M="SHOW_RESET",H="SHOW_DOWNLOAD",B="SHOW_NOTIFY",V="SAVE_REPORT",F="action",U="ASC",W="DESC",$="dialog_js",Y="checked",K="PAGE",j="REGION",z={BUTTON:{CANCEL:s("CANCEL"),DELETE:s("DELETE"),APPLY:s("APPLY"),SEND:s("SEND"),DOWNLOAD:s("DOWNLOAD")},DIALOG_TITLE:{SELECT_COLUMNS:s("SELECT_COLUMNS"),FILTER:s("FILTER"),HIGHLIGHT:s("HIGHLIGHT"),SORT:s("SORT"),CONTROL_BREAK:s("CONTROL_BREAK"),COMPUTATION:s("COMPUTE"),AGGREGATE:s("AGGREGATE"),CHART:s("CHART"),GROUP_BY:s("GROUP_BY"),GROUP_BY_SORT:s("GROUP_BY_SORT"),PIVOT:s("PIVOT"),PIVOT_SORT:s("PIVOT_SORT"),FLASHBACK:s("FLASHBACK"),SAVE_REPORT:s("SAVE_REPORT"),RENAME_REPORT:s("RENAME_REPORT"),DELETE_REPORT:s("DELETE_REPORT"),SAVE_DEFAULT_REPORT:s("SAVE_DEFAULT_REPORT"),RENAME_DEFAULT_REPORT:s("RENAME_DEFAULT_REPORT"),DELETE_DEFAULT_REPORT:s("DELETE_DEFAULT_REPORT"),RESET:s("RESET"),DOWNLOAD:s("DOWNLOAD"),SUBSCRIPTION:s("SUBSCRIPTION")}};e.widget("apex.interactiveReport",{version:"18.1",widgetEventPrefix:"interactivereport",lastFunction:null,idPrefix:null,currentColumnId:null,lastColumnId:null,computationId:null,reportId:null,worksheetId:null,region$:null,dialogDrop$:null,tempReturnElement$:null,viewMode:p,options:{regionId:null,ajaxIdentifier:null,toolbar:!0,searchField:!0,columnSearch:!0,rowsPerPageSelect:!1,reportsSelect:!0,actionsMenu:!0,reportViewMode:p,selectColumns:!0,filter:!0,rowsPerPage:!0,currentRowsPerPage:50,maxRowsPerPage:null,maxRowCount:null,sort:!0,controlBreak:!0,highlight:!0,compute:!0,aggregate:!0,chart:!0,groupBy:!0,pivot:!0,flashback:!0,saveReport:!0,saveDefaultReport:!1,reset:!0,help:!0,helpLink:"",download:!0,subscription:!0,pagination:!0,detailLink:!1,isControlPanelCollapsed:!1,fixedHeader:K,fixedHeaderMaxHeight:null,pageItems:null,actionsMenuStructure:"IG",lazyLoading:!1,beforeRefresh:null,afterRefresh:null},_create:function(){var t=this.options.regionId,i=this,o=e(_(t),apex.gPageContext$),n=e(_(t+"_ir"),apex.gPageContext$);e(_(t+"_toolbar"),apex.gPageContext$);0===o.length&&(o=n.wrap('<div id="'+t+'"></div>')),this.idPrefix=this.options.regionId,this.reportId=this._getElement("report_id").val(),this.worksheetId=this._getElement("worksheet_id").val(),this.viewMode=this._getElement("view_mode").val(),this.region$=o,this.dialogDrop$=this._getElement($),this.needsLazyLoading=!1,this._getElement("worksheet_region").addClass(h),this._initOnCreate(),this._on(this.region$,{apexrefresh:function(e){this._search(),e.stopPropagation()}}),apex.region.create(t,{type:"InteractiveReport",refresh:function(){i.refresh()},widget:function(){return i.element}}),this.options.lazyLoading&&(this.needsLazyLoading=!0,setTimeout((()=>{apex.widget.util.isVisible(o)&&(i.needsLazyLoading=!1,i.refresh())}),0))},_destroy:function(){this._getElement("worksheet_region").removeClass(h),apex.region.destroy(this.options.regionId)},_setOption:function(e,t){this._super(e,t)},_action:function(t,i){var o=e.extend({widgetMod:"ACTION",widgetAction:t},i);this._get(o)},_aggregateClear:function(e){this._action("DELETE_AGGREGATE",{id:e})},_aggregateControl:function(){var t=this._getDialogElement("aggregate_by").val(),i=-1!==e.inArray(t,["COUNT","COUNT_DISTINCT"]);this._getDialogElement("all_columns_container").toggle(i),this._getDialogElement("number_columns_container").toggle(!i)},_aggregateSave:function(){var t,i=this._getDialogElement("aggregate_by").val(),o=this._getDialogElement("aggregation").val();t=-1!==e.inArray(i,["COUNT","COUNT_DISTINCT"])?this._getDialogElement("all_columns").val():this._getDialogElement("number_columns").val(),this._action("SAVE_AGGREGATE",{id:o,value:i,x05:t})},_chartClear:function(){this.options.reportViewMode=p,this._action("DELETE_CHART")},_chartControl:function(){var t=e(".a-IRR-dialogCol.js-no-pie",this._getElement($)).find("input, select");this._getDialogElement("chart_type_2").prop(Y)?(t.prop("disabled",!0),t.filter("input").val(""),t.addClass("is-disabled")):(t.prop("disabled",!1),t.removeClass("is-disabled"))},_chartSave:function(){this._action("SAVE_CHART",{f01:this._utilGetFormElValues([this._getId("chart_type"),this._getId("chart_label"),this._getId("chart_value"),this._getId("aggregate_by"),this._getId("label_axis_title"),this._getId("value_axis_title"),this._getId("sort"),this._getId("orientation")])})},_chartView:function(){this._action("VIEW_CHART")},_columnOrder:function(e){var t;e===U||e===W?this._action("COLUMN_ORDER",{f01:this.lastColumnId,f02:e}):(t=this._utilGetFormElAttributes(),this._action("SORT",{f01:t.ids,f02:t.values}))},_columnDisplay:function(){var e=[];this._getDialogElement("shuttle_right").find("option").each((function(){e.push(this.value)})),this._action("SET_COLUMNS",{f01:e})},_columnHelp:function(){this._controlsGet("INFO",this.currentColumnId)},_columnHide:function(e){var t;t=e||this.currentColumnId,this._action("HIDE",{id:t})},_columnSearchShow:function(e){var t,i=[],o=[],n=this,a=JSON.parse(e).row;for(t=0;t<a.length;t++)"0"===a[t].C?(i.push({type:F,label:a[t].D,value:a[t].R,action:function(){n._getElement("column_search_root").removeClass(g),n._getElement("column_search_current_column").val(""),n._getElement("search_field").attr({title:"Search",placeholder:""})}}),i.push({type:"separator"})):o.push({label:a[t].D,value:a[t].R});i.push({type:"radioGroup",get:function(){return n._getElement("column_search_current_column").val()},set:function(e){var i,o,a=this.choices;for(t=0;t<a.length;t++)if(a[t].value===e){i=c("SEARCH_COLUMN",a[t].label),o=a[t].value,n._getElement("column_search_root").addClass(g),n._getElement("column_search_current_column").val(o),n._getElement("search_field").attr({title:i,placeholder:i});break}},choices:o}),this.searchMenu.items=i,this.searchMenuCallback(),this.searchMenuCallback=null,this.searchMenu=null},_computationClear:function(){this._action("DELETE_COMPUTATION",{id:this._getDialogElement("comp_id").val()})},_computationSave:function(){$f_get_emptys([this._getId("column_heading"),this._getId("computation_expr")],"error","")||this._action("SAVE_COMPUTATION",{id:this._getDialogElement("comp_id").val(),value:this._getDialogElement("column_heading").val(),x06:this._getDialogElement("format_mask").val(),x07:this._getDialogElement("computation_expr").val()})},_computationShow:function(e){var t;t=e||this.computationId,this._controlsGet(b,t),this.computationId=null},_controlBreakOn:function(e){e&&(this.currentColumnId=e),this._action("BREAK",{id:this.currentColumnId})},_controlBreakSave:function(){var e,t=[];for(e=1;e<7;e++)t.push(this._getId("column")+"_0"+e),t.push(this._getId("enable")+"_0"+e);this._action("SAVE_BREAK",{f01:t,f02:this._utilGetFormElValues(t)})},_controlBreakToggle:function(e,t){this._action("BREAK_TOGGLE",{id:e,value:t})},_controlsFormatMask:function(t){this.tempReturnElement$=e(_(t)),this._controlsGet("FORMAT_MASK_LOV")},_controlsGet:function(e,t){this._dialogReset(),t&&(this.currentColumnId=t),this._get({widgetMod:"CONTROL",widgetAction:e,id:t})},_controlsNarrow:function(t){this.tempReturnElement$=e(_(t)),this._controlsGet("NARROW",this._getDialogElement("column_name").val())},_controlsRow:function(e){this._controlsGet("SHOW_DETAIL",e)},_dialogCheck:function(t,i){var o=".a-IRR-sortWidget",n=this._dialogReset;t&&(o=t),i&&(n=i),this._on(this.document,{click:function(t){e(t.target).closest(o).length||n.call(this)}})},_dialogComp:function(e,t){var i=!isNaN(t)||"."===t;html_ReturnToTextSelection(t+"",e,i)},_dialogCurrentOperator:function(){var t=this._getDialogElement("column_name"),i=e(t.find("option")[t.prop("selectedIndex")]).attr("class");return this._getDialogElement(i+"_OPT")},_dialogColumnCheck:function(){var t=this._dialogCurrentOperator(),i=t.parents(".u-Form-fieldContainer");e(i).siblings().hide().end().show(),this._dialogOperatorCheck(t)},_dialogOpen:function(e,t){var i,o,n,a,r,s=0,c=640,_="",h=this,d=this._getElement($);function g(e,t,i,o,n){var a,l;a=i||z.BUTTON.APPLY,o&&(l=u),r.push({text:a,class:l,click:function(){e?t.call(h,e):t.call(h),n&&h._getElement($).dialog("close")}})}switch(r=[{text:z.BUTTON.CANCEL,click:function(){h._getElement($).dialog("close")}}],e){case R:o=z.DIALOG_TITLE.SELECT_COLUMNS,_="a-IRR-dialog--selectColumns",c=480,g(null,h._columnDisplay,null,!0,!0);break;case v:o=z.DIALOG_TITLE.FILTER,_="a-IRR-dialog--filter",s=230,(n=h._getDialogElement("filter_id").val())&&g(n,h._filterDelete,z.BUTTON.DELETE,!1,!0),g(n,h._filterSave,null,!0,!1);break;case T:o=z.DIALOG_TITLE.HIGHLIGHT,_="a-IRR-dialog--highlight",s=400,(n=h._getDialogElement("highlight_id").val())&&g(n,h._highlightClear,z.BUTTON.DELETE,!1,!0),g(n,h._highlightSave,null,!0,!1);break;case I:o=z.DIALOG_TITLE.SORT,_="a-IRR-dialog--sort",c=480,g(this,h._columnOrder,null,!0,!0);break;case w:o=z.DIALOG_TITLE.CONTROL_BREAK,_="a-IRR-dialog--controlBreak",c=480,g(null,h._controlBreakSave,null,!0,!0);break;case b:o=z.DIALOG_TITLE.COMPUTATION,_="a-IRR-dialog--computation",(n=h._getDialogElement("comp_id").val())&&g(null,h._computationClear,z.BUTTON.DELETE,!1,!0),g(null,h._computationSave,null,!0,!1);break;case O:o=z.DIALOG_TITLE.AGGREGATE,_="a-IRR-dialog--aggregate",c=480,(n=h._getDialogElement("aggregation").val())&&g(n,h._aggregateClear,z.BUTTON.DELETE,!1,!0),g(null,h._aggregateSave,null,!0,!0);break;case C:o=z.DIALOG_TITLE.CHART,_="a-IRR-dialog--chart",c=480,(n=h._getDialogElement("chart_type_hidden").val())&&g(null,h._chartClear,z.BUTTON.DELETE,!1,!0),g(null,h._chartSave,null,!0,!1);break;case D:o=z.DIALOG_TITLE.GROUP_BY,_="a-IRR-dialog--groupBy",c=720,(n=h._getDialogElement("group_by_id").val())&&g(null,h._groupByRemove,z.BUTTON.DELETE,!1,!0),g(null,h._groupBySave,null,!0,!1);break;case k:o=z.DIALOG_TITLE.GROUP_BY_SORT,_="a-IRR-dialog--groupBySort",c=480,g(this,h._groupBySort,null,!0,!0);break;case A:o=z.DIALOG_TITLE.PIVOT,_="a-IRR-dialog--pivot",c=720,(n=h._getDialogElement("pivot_id").val())&&g(null,h._pivotRemove,z.BUTTON.DELETE,!1,!0),g(null,h._pivotSave,null,!0,!1);break;case S:o=z.DIALOG_TITLE.PIVOT_SORT,_="a-IRR-dialog--pivotSort",g(this,h._pivotSort,null,!0,!0);break;case L:o=z.DIALOG_TITLE.FLASHBACK,_="a-IRR-dialog--flashback",c=480,(n=h._getDialogElement("flashback_time").val())&&g(null,h._flashbackClear,z.BUTTON.DELETE,!1,!0),g(null,h._flashbackSave,null,!0,!1);break;case V:o=z.DIALOG_TITLE.SAVE_REPORT,_="a-IRR-dialog--save",c=480,g(null,h._save,null,!0,!1);break;case y:o=z.DIALOG_TITLE.RENAME_REPORT,_="a-IRR-dialog--rename",c=480,g(h.reportId,h._save,null,!0,!1);break;case G:o=z.DIALOG_TITLE.DELETE_REPORT,_="a-IRR-dialog--delete",c=480,g(null,h._remove,null,!0,!0);break;case P:o=z.DIALOG_TITLE.SAVE_DEFAULT_REPORT,_="a-IRR-dialog--saveDefault",c=480,g(null,h._saveDefault,null,!0,!1);break;case x:o=z.DIALOG_TITLE.RENAME_DEFAULT_REPORT,_="a-IRR-dialog--renameDefault",c=480,g("RENAME_DEFAULT",h._saveDefault,null,!0,!1);break;case N:o=z.DIALOG_TITLE.DELETE_DEFAULT_REPORT,_="a-IRR-dialog--deleteDefault",c=480,g("DELETE_DEFAULT",h._remove,null,!0,!0);break;case M:o=z.DIALOG_TITLE.RESET,_="a-IRR-dialog--reset",c=320,g(null,h._reset,null,!0,!0);break;case H:o=z.DIALOG_TITLE.DOWNLOAD,_="a-IRR-dialog--download",c=480,g("DOWNLOAD",h._download,z.BUTTON.DOWNLOAD,!0,!1);break;case B:o=z.DIALOG_TITLE.SUBSCRIPTION,_="a-IRR-dialog--subscription",n=h._getDialogElement("notify_id").val(),a=h._getDialogElement("email_not_configured").text(),n&&g(null,h._notifyClear,z.BUTTON.DELETE,!1,!0),a||g(null,h._notifySave,null,!0,!1)}_=("a-IRR-dialog "+_).trim(),i=d.dialog({modal:!0,dialogClass:_,width:c,minHeight:s,title:o,buttons:r,position:{my:"left+10 top+10",at:"left top",of:this._getElement("content")},close:function(){h._off(i),i.dialog("destroy")},open:function(){l.dialogAutoHeight(d)}}),t&&t.call()},_dialogColumnHandlers:function(){this._on(this._getDialogElement("column_name"),{change:function(){this._dialogColumnCheck()}}),this._on(this._getElement($),{"change select.a-IRR-operator":function(t){this._dialogOperatorCheck(e(t.target))},"click button.a-IRR-button--menu":function(t){var i=e(t.currentTarget).data("picker-for");this._controlsNarrow(i)}})},_dialogOperatorCheck:function(t){var i,o=[],n=t.val(),a=t.data("column-type"),l=["is in the last","is not in the last","is in the next","is not in the next"];o[0]=$x(this._getId("expression")).parentNode,o[1]=$x(this._getId("expression2")).parentNode,o[2]=$x(this._getId("expression3")).parentNode,o[3]=$x(this._getId("between_from")).parentNode,o[4]=$x(this._getId("between_to")).parentNode,o[5]=$x(this._getId("and")),$x_Show_Hide(this._getId("expression_icon_link"),o),$x_Hide(o[5]),"is null"===n||"is not null"===n?this._getDialogElement("expression_container").hide():(this._getDialogElement("expression_container").show(),"DATE"===a&&-1===e.inArray(n,l)?($x_Show(o[3]),i=this._getDialogElement("column_name").find(":selected").data("format-mask"),this._setDateFieldFormatMask(this._getDialogElement("between_from"),i),this._getDialogElement("between_from").siblings(".ui-datepicker-trigger").addClass("a-Button a-Button--calendar"),"between"===n&&($x_Show(o[4]),$x_Show(o[5]),this._setDateFieldFormatMask(this._getDialogElement("between_to"),i),this._getDialogElement("between_to").siblings(".ui-datepicker-trigger").addClass("a-Button a-Button--calendar"))):($x_Show(o[0]),"between"===n&&($x_Show(o[5]),$x_Show(o[1])),e.inArray(n,l)>-1&&$x_Show_Hide(o[2],this._getId("expression_icon_link"))))},_dialogReset:function(){this.suppressUpdate||(this.currentColumnId=null,this.computationId=null,this._off(this.document,"click"))},_dialogUtilExpType:function(){var e={};return e.col=$x(this._getId("column_name")),e.col_type=e.col.options[e.col.selectedIndex].className,e.col_opt=$x(this._getId(e.col_type+"_OPT")),e.col_opt_val=$v(e.col_opt),"DATE"===e.col_type&&"is in the last"!==e.col_opt_val&&"is not in the last"!==e.col_opt_val&&"is in the next"!==e.col_opt_val&&"is not in the next"!==e.col_opt_val?e.form_items=[this._getId("between_from"),this._getId("between_to")]:e.form_items=[this._getId("expression"),this._getId("expression2")],e},_dialogValidate:function(){var e=[],t=this._dialogUtilExpType();switch(!0){case"between"===t.col_opt_val:e=[t.form_items[0],t.form_items[1]];break;case"is null"===t.col_opt_val||"is not null"===t.col_opt_val:e=[];break;case"is in the last"===t.col_opt_val||"is not in the last"===t.col_opt_val||"is in the next"===t.col_opt_val||"is not in the next"===t.col_opt_val:e=[t.form_items[0],this._getId("expression3")];break;default:e=[t.form_items[0]]}return!$f_get_emptys(e,"error","")&&t},_download:function(){var e,t=[this._getId("download_format")];$f_get_emptys(t,"error","")||(e=[this._getId("download_format"),this._getId("data_only"),this._getId("pdf_page_size"),this._getId("pdf_orientation"),this._getId("strip_rich_text"),this._getId("accessible")],this._action("GET_DOWNLOAD_LINK",{f01:e,f02:this._utilGetFormElValues(e)}))},_emailSend:function(){var e,t=[this._getId("email_to"),this._getId("download_format")];$f_get_emptys(t,"error","")||(e=[this._getId("email_to"),this._getId("email_cc"),this._getId("email_bcc"),this._getId("email_subject"),this._getId("email_body"),this._getId("download_format"),this._getId("data_only"),this._getId("pdf_page_size"),this._getId("pdf_orientation"),this._getId("strip_rich_text"),this._getId("accessible")],this._action("SEND_EMAIL",{f01:e,f02:this._utilGetFormElValues(e)}),this._getElement($).dialog("close"))},_emailShow:function(){var e,t=this,i=this._getElement($),o=this._getDialogElement("email"),n=this._getDialogElement("email_button");o.show(),n.show(),n.is(":visible")&&(e=[{text:z.BUTTON.CANCEL,click:function(){i.dialog("close")}},{text:z.BUTTON.SEND,class:u,click:function(){t._emailSend()}}],i.dialog("option","buttons",e))},_emailHide:function(){var e=this._getElement($),t=this,i=this._getDialogElement("email"),o=[{text:z.BUTTON.CANCEL,click:function(){e.dialog("close")}},{text:z.BUTTON.DOWNLOAD,class:u,click:function(){t._download()}}];i.hide(),e.dialog("option","buttons",o)},_filterDelete:function(e){this._action("FILTER_DELETE",{id:e})},_filterSave:function(t){var i,o,n="ADD",a=e("#"+this._getId("filter_type")).find("input:checked"),l=a.val(),r=a.attr("id");if(t?(this.currentColumnId=t,n="UPDATE"):t=this._getDialogElement("column_name").val(),"COLUMN"===l){if(!(i=this._dialogValidate()))return;o=[r,i.col.id,i.col_opt.id,i.form_items[0],i.form_items[1],this._getId("expression3")]}else o=[r,this._getId("filter_expr"),this._getId("filter_name")];this._action("FILTER",{widgetActionMod:n,f01:this._utilGetFormElValues(o),id:t})},_flashbackSave:function(){this._action("FLASHBACK_SET",{value:this._getDialogElement("flashback_time").val()})},_filterToggle:function(e,t){this._action("FILTER_TOGGLE",{id:e,value:t})},_flashbackClear:function(){this._action("FLASHBACK_CLEAR")},_flashbackToggle:function(){this._action("FLASHBACK_TOGGLE")},_functionControl:function(t){var i,o,n;t&&(o=(i=t.id).substr(i.length-2),n=-1!==e.inArray(e(t).val(),["SUM","AVG","MAX","MIN","MEDIAN","RATIO_TO_REPORT_SUM"]),this._getDialogElement("number_columns_container_"+o).toggle(n),this._getDialogElement("all_columns_container_"+o).toggle(!n))},_get:function(t){var i,a,l=this,s=!1,c=t.widgetMod,h=t.widgetAction,d=t.widgetActionMod,u=["SAVE_CHART","SAVE_COMPUTATION","FILTER","FLASHBACK_SET","GROUP_BY_SAVE","SAVE_HIGHLIGHT","CONTROL_MIN","SAVE_NOTIFY","SAVE_PIVOT","CHANGE_DETAIL_OPTION","FORMAT_MASK_LOV","NARROW"].includes(h);this.suppressUpdate=u,this.currentControl=h,"INFO"!==h&&this._sortWidgetHide(),c&&!u&&(["ACTION","PULL"].includes(c)||"CONTROL"===c&&"SHOW_DETAIL"===h)&&(s=!0),delete(i=e.extend({p_widget_name:"worksheet",p_widget_mod:c,p_widget_action:h,p_widget_action_mod:d,p_widget_num_return:l.options.currentRowsPerPage,x01:l.worksheetId,x02:l.reportId,x03:t.id,x04:t.value,pageItems:this.options.pageItems},t)).widgetMod,delete i.widgetAction,delete i.widgetActionMod,delete i.id,delete i.value,"RESET"!==i.p_widget_action&&"REPORT_CHANGED"!==i.p_widget_action||delete i.p_widget_num_return,i.p_widget_action_mod||delete i.p_widget_action_mod,a={dataType:"html",refreshObject:s?this.region$:null,loadingIndicator:l._getElement("worksheet_region"),loadingIndicatorPosition:"centered",success:function(t){var i,o,a,s,_;if("CONTROL"===c){if("SORT_WIDGET"===h)l._sortWidgetShow(t);else if("INFO"===h)l._helpWidgetShow(t);else if("NARROW"===h)i=l._inlinePicker("NARROW",t);else if("FORMAT_MASK_LOV"===h)i=l._inlinePicker("FORMAT_MASK_LOV",t);else if("SEARCH_COLUMN"===h)l._columnSearchShow(t);else if("SHOW_DETAIL"===h)l._singleRowViewShow(t);else{switch(h){case v:o=function(){var t=l._getElement($);l._dialogColumnCheck(),l._dialogColumnHandlers(),l._on(l._getDialogElement("filter_type"),{"click input":function(e){var t="COLUMN"===e.target.value;l._getDialogElement("column_filter").toggle(t),l._getDialogElement("row_filter").toggle(!t)}}),l._on(l._getDialogElement("filter_expr_clear"),{click:function(e){l._getDialogElement("filter_expr").val(""),e.preventDefault()}}),l._on(l._getDialogElement("row_filter_columns"),{"click li":function(t){var i=e(t.currentTarget).data("column-id");l._dialogComp(l._getId("filter_expr"),i),t.preventDefault()}}),l._on(l._getDialogElement("row_filter_operators"),{"click li":function(t){var i=e(t.currentTarget).data("operator");l._dialogComp(l._getId("filter_expr"),i),t.preventDefault()}}),t.find(".a-IRR-dialogContent").show()};break;case T:o=function(){var e=l._getElement($).find(".a-IRR-dialogContent"),t=l._getDialogElement("bg_color"),i=l._getDialogElement("font_color");l._dialogColumnCheck(),l._dialogColumnHandlers(),l._on(t.add(i),{change:function(){let e,o=l._getDialogElement("_contrast"),n=apex.item(t[0].id).getValue()||"#ffffff",a=apex.item(i[0].id),r=a.getValue()||"#000000";l._getDialogElement("highlight_preview").css({backgroundColor:n,color:r}),a.whenReady().then((()=>{e=a.contrastWith(n),apex.widget.util.colorPicker.updateColorContrastReport(o,e)}))}}),e.find(".a-IRR-highlightContrast").html(apex.widget.util.colorPicker.renderColorContrastReport(l._getId("_contrast"))),e.show(),apex.item.attach(e),t.trigger("change")};break;case C:o=function(){l._chartControl(),l._on(l._getDialogElement("chart_type"),{"click input":function(){l._chartControl()}})};break;case b:o=function(){l._on(l._getDialogElement("comp_id"),{change:function(t){l._computationShow(e(t.currentTarget).val())}}),l._on(l._getDialogElement("format_mask_picker"),{click:function(e){l._controlsFormatMask(l._getId("format_mask")),e.preventDefault()}}),l._on(l._getDialogElement("computation_expr_clear"),{click:function(e){l._getDialogElement("computation_expr").val(""),e.preventDefault()}}),l._on(l._getDialogElement("computation_columns"),{"click li":function(t){var i=e(t.currentTarget).data("column-id");l._dialogComp(l._getId("computation_expr"),i),t.preventDefault()}}),l._on(l._getDialogElement("computation_keypad"),{"click button":function(t){var i=e(t.currentTarget).data("key");l._dialogComp(l._getId("computation_expr"),i),t.preventDefault()}}),l._on(l._getDialogElement("computation_functions"),{"click li":function(t){var i=e(t.currentTarget).data("function");l._dialogComp(l._getId("computation_expr"),i),t.preventDefault()}}),l._getDialogElement("compute_examples_container").collapsible({controllingElement:"button",content:"#"+l._getId("compute_examples"),collapsed:!0})};break;case R:o=function(){l.g_Shuttlep_v01=null,window.g_Shuttlep_v01=new dhtml_ShuttleObject($x(l._getId("shuttle_left")),$x(l._getId("shuttle_right")))};break;case V:o=function(){l._on(l._getDialogElement("save_option"),{change:function(e){l._controlsGet(e.target.value)}})};break;case P:case x:o=function(){l._on(l._getDialogElement("default_type"),{"click input":function(e){this._saveDefaultTypeCheck(e.target.value)}}),l._saveDefaultTypeCheck($v(l._getId("default_type")))};break;case O:o=function(){l._on(l._getDialogElement("aggregation"),{change:function(t){this._controlsGet(O,e(t.currentTarget).val())}}),l._on(l._getDialogElement("aggregate_by"),{change:function(){this._aggregateControl()}})};break;case B:case H:o=function(){const t=l._getDialogElement("download_format").val();let o;l._getDialogElement("download_formats").iconList({selectionChange:function(){l._getDialogElement("download_format").val(e(this).iconList("getSelectionValues")[0]).change()}}),t&&(o=l._getDialogElement("download_formats").find(`.a-IRR-iconList-item[data-value='${t}']`)),o&&0!==o.length||(o=l._getDialogElement("download_formats").find(".a-IRR-iconList-item").first()),o.click(),i=o,l._on(l._getDialogElement("download_format"),{change:function(){const e=l._getDialogElement("download_format");[{id:"pdf_container",active:e=>"PDF"===e},{id:"strip_rich_text_container",active:e=>["CSV","XLSX"].includes(e)},{id:"data_only_container",active:e=>"CSV"!==e}].forEach((t=>{t.active(e.val())?l._getDialogElement(t.id).show():l._getDialogElement(t.id).hide()}))}}),h===H&&l._on(l._getDialogElement("send_as_email"),{change:function(){l._getDialogElement("send_as_email").is(":checked")?l._emailShow():l._emailHide()}})};break;case D:o=function(){l._on(l._getDialogElement("add_column"),{click:function(e){this._utilAddMoreColumn(this._groupByMaxValue,"a-IRR-group-by-column"),e.preventDefault()}}),l._on(l._getDialogElement("group_by_functions"),{"change select.a-IRR-function":function(e){this._functionControl(e.target)},"click button.a-Button--menu":function(t){l._controlsFormatMask(e(t.currentTarget).data("picker-for")),t.preventDefault()}}),l._on(l._getDialogElement("add_function"),{click:function(e){this._utilAddMoreFunction(this._groupByMaxValue),e.preventDefault()}})};break;case A:o=function(){l._on(l._getDialogElement("add_pivot_column"),{click:function(e){this._utilAddMoreColumn(this._pivotMaxValue,"a-IRR-pivot-column"),e.preventDefault()}}),l._on(l._getDialogElement("add_row_column"),{click:function(e){this._utilAddMoreColumn(this._pivotMaxValue,"a-IRR-row-column"),e.preventDefault()}}),l._on(l._getDialogElement("pivot_functions"),{"change select.a-IRR-function":function(e){this._functionControl(e.target)},"click a.a-IRR-format-mask-picker":function(t){l._controlsFormatMask(e(t.currentTarget).data("picker-for")),t.preventDefault()},"click button.a-Button--menu":function(t){l._controlsFormatMask(e(t.currentTarget).data("picker-for")),t.preventDefault()}}),l._on(l._getDialogElement("add_function"),{click:function(e){this._utilAddMoreFunction(this._pivotMaxValue),e.preventDefault()}})}}l._getElement($).html(t),l._dialogOpen(h,o)}void 0===i&&(i=e(":input:visible",l._getElement($))),i.length>0&&i[0].focus()}else if("GET_DOWNLOAD_LINK"===h)try{const e=JSON.parse(t);r.showErrors({message:e.error,location:"page"})}catch{n.redirect(t)}else u?l.lastFunction=function(){l._validAction(t)}:((a=e($u_js_temp_drop())).html(t),s=a.find(l._getIdSelector("toolbar_controls")),_=a.find(l._getIdSelector("content")),l._getElement("toolbar_controls",l.element).replaceWith(s),l._getElement("content",l.element).replaceWith(_),l.options.currentRowsPerPage=1*l._getElement("row_select").val(),l.viewMode=l._getElement("view_mode").val(),l._initToolbar(),l._initControlPanel(),l.reportId=l._getElement("report_id").val(),l._singleRowViewHide(),l._getElement("full_view").show(),a.remove(),l._initFixedHeader(!0),e(":focus").length||(i=l.currentElementId?e("#"+l.currentElementId):l.element.find(":focusable")).length>0&&i[0].focus())},complete:function(){l.lastFunction&&(l.lastFunction(),l.lastFunction=!1),e(_(l.options.regionId+"_toolbar"),apex.gPageContext$).css("visibility",""),e(_(l.options.regionId+"_content"),apex.gPageContext$).removeClass("is-loading"),"SEARCH_COLUMN"===h&&l.searchMenuCallback&&(l.searchMenuCallback(!1),l.searchMenuCallback=null,l.searchMenu=null)}},o.plugin(this.options.ajaxIdentifier,i,a)},_getId:function(e){return this.idPrefix+"_"+e},_getIdSelector:function(e){return _(this._getId(e))},_getElement:function(t,i){var o;return o=i||(t===$||/^sort_widget.*$/.test(t)?apex.gPageContext$:this.element),e(this._getIdSelector(t),o)},_getDialogElement:function(e){return this._getElement(e,this._getElement($))},_groupByMaxValue:8,_groupByRemove:function(){this._action("GROUP_BY_REMOVE")},_groupBySave:function(){var e=this._utilGetFormElAttributes();this._action("GROUP_BY_SAVE",{f01:e.ids,f02:e.values})},_groupBySort:function(e){var t,i=this._getDialogElement("group_by_id").val();e===U||e===W?(this.lastColumnId=e.id,this._action("GROUP_BY_COLUMN_SORT",{id:i,f01:this.lastColumnId,f02:e})):(t=this._utilGetFormElAttributes(),this._action("GROUP_BY_SORT",{id:i,f01:t.ids,f02:t.values}))},_groupByView:function(){this._action("VIEW_GROUP_BY")},_helpWidgetShow:function(e){this._getElement("sort_widget_help").html(e).show(),this._getElement("sort_widget_action_help").find("button.a-IRR-sortWidget-button").addClass(g),this.lastColumnId=this.currentColumnId,this._dialogCheck(null,this._sortWidgetHide)},_highlightClear:function(e){var t;t=e||$x("HIGHLIGHT_ID").value,this._action("CLEAR_HIGHLIGHT",{id:t})},_highlightSave:function(){var e,t=this._dialogValidate();t&&(e=this._utilGetFormElAttributes(),this._action("SAVE_HIGHLIGHT",{f01:e.ids,f02:e.values}),t=null)},_highlightToggle:function(e,t){this._action("TOGGLE_HIGHLIGHT",{id:e,value:t})},_initControlPanel:function(){var t=this;this._on(this._getElement("control_panel"),{"click a.a-IRR-controlsLabel":function(i){var o=e(i.currentTarget);switch(o.data("setting")){case"filter":this._controlsGet(v,o.data("filter-id"));break;case"report":this._controlsGet(y);break;case"report-default":this._controlsGet(x);break;case"highlight":this._controlsGet(T,o.data("highlight-id"));break;case"break":this._controlsGet(w);break;case"chart":this._controlsGet(C);break;case"group_by":this._controlsGet(D);break;case"pivot":this._controlsGet(A);break;case"flashback":t._controlsGet(L)}i.preventDefault()},"click a.a-IRR-reportSummary-label":function(i){var o=e(i.currentTarget);switch(o.data("setting")){case"filter":this._controlsGet(v,o.data("filter-id"));break;case"report":this._controlsGet(y);break;case"report-default":this._controlsGet(x);break;case"highlight":this._controlsGet(T,o.data("highlight-id"));break;case"break":this._controlsGet(w);break;case"chart":this._controlsGet(C);break;case"group-by":this._controlsGet(D);break;case"pivot":this._controlsGet(A);break;case"flashback":t._controlsGet(L);break;default:t._getElement("control_panel").collapsible("expand")}i.preventDefault()},"click input.a-IRR-controlsCheckbox":function(t){var i=e(t.target),o=i.prop(Y)?"Y":"N";switch(i.data("setting")){case"break":this._controlBreakToggle(i.data("break-column"),o);break;case"filter":this._filterToggle(i.data("filter-id"),o);break;case"highlight":this._highlightToggle(i.data("highlight-id"),o);break;case"flashback":this._flashbackToggle()}},"click button.a-IRR-button--remove":function(t){var i=e(t.currentTarget);switch(i.data("setting")){case"break":this._controlBreakOn(i.data("break-column"));break;case"filter":this._filterDelete(i.data("filter-id"));break;case"report":this._controlsGet(G);break;case"report-default":this._controlsGet(N);break;case"highlight":this._highlightClear(i.data("highlight-id"));break;case"flashback":this._flashbackClear();break;case"chart":this._chartClear();break;case"group-by":this._groupByRemove();break;case"pivot":this._pivotRemove()}t.preventDefault()}}),this._getElement("control_panel").collapsible({content:"div.a-MediaBlock-content",collapsed:t.options.isControlPanelCollapsed,collapse:function(){t.options.isControlPanelCollapsed||(t.options.isControlPanelCollapsed=!0,t._action("CONTROL_MIN",{value:"Y"})),t._getElement("control_panel_summary").show()},expand:function(){t.options.isControlPanelCollapsed&&(t.options.isControlPanelCollapsed=!1,t._action("CONTROL_MIN",{value:"N"})),t._getElement("control_panel_summary").hide()},renderIcon:!1})},_initFixedHeader:function(t){var i,o=this.options;if((o.fixedHeader===K||o.fixedHeader===j)&&0===e(".a-IRR-header--group",this.element).length){switch(this.viewMode){case p:o.reportViewMode===p&&(i="a-IRR-reportView");break;case f:i="a-IRR-groupByView"}if(i){if(0===e(this.element).find(".a-IRR-iconViewTable").length)switch(o.fixedHeader){case K:e("."+i,this.element).setTableHeadersAsFixed(),e(".js-stickyTableHeader",this.element).stickyWidget({toggleWidth:!0,stickToEnd:!0});break;case j:e("."+i,this.element).setTableHeadersAsFixed({maxHeight:o.fixedHeaderMaxHeight})}t&&e(window).trigger("apexwindowresized")}}},_initMenus:function(){var t,i,o=this,a=this.options,l=[1,5,10,15,20,25,50,100,1e3];function r(e,t){for(i=0;i<e.length;i++)if(e[i].id===t)return e[i]}function c(e,t){var i,o=e?1*e:null,n=t?1*t:null;return e&&t?i=o<n?o:n:e?t||(i=o):i=n,i}t="IG"===a.actionsMenuStructure?{items:[{id:"irColumn",type:F,label:s("COLUMNS"),hide:!0,icon:"icon-irr-select-cols",action:function(){o._controlsGet(R,"COLUMN")}},{type:"separator"},{id:"irFilter",type:F,label:s("FILTER"),hide:!0,icon:"icon-irr-filter",action:function(){o._controlsGet(v)}},{id:"irData",type:"subMenu",label:s("DATA"),hide:!1,icon:"icon-ig-data",menu:{items:[{id:"irOrdering",type:F,label:s("SORT"),hide:!0,icon:"icon-irr-sort",action:function(){o._controlsGet(I)}},{id:"irGroupBySort",type:F,label:s("GROUP_BY_SORT"),hide:!0,icon:"icon-irr-sort",action:function(){o._controlsGet(k)}},{id:"irPivotSort",type:F,label:s("PIVOT_SORT"),hide:!0,icon:"icon-irr-sort",action:function(){o._controlsGet(S)}},{id:"irAggregate",type:F,label:s("AGGREGATE"),hide:!0,icon:"icon-irr-aggregate",action:function(){o._controlsGet(O)}},{id:"irCompute",type:F,label:s("COMPUTE"),hide:!0,icon:"icon-irr-compute",action:function(){o._computationShow()}},{id:"irFlashback",type:F,label:s("FLASHBACK"),hide:!0,icon:"icon-irr-flashback",action:function(){o._controlsGet(L)}}]}},{id:"irFormat",type:"subMenu",label:s("FORMAT"),hide:!1,icon:"icon-irr-format",menu:{items:[{id:"irCtrlBreak",type:F,label:s("CONTROL_BREAK"),hide:!0,icon:"icon-irr-control-break",action:function(){o._controlsGet(w)}},{id:"irHighlight",type:F,label:s("HIGHLIGHT"),hide:!0,icon:"icon-irr-highlight",action:function(){o._controlsGet(T)}},{id:"irRowsPerPage",type:"subMenu",label:s("ROWS_PER_PAGE"),hide:!0,icon:"icon-irr-rows",menu:{items:[{type:"radioGroup",set:function(e){o.options.currentRowsPerPage=1*e,o._search("SEARCH")},get:function(){return o.options.currentRowsPerPage},choices:[]}]}}]}},{type:"separator"},{id:"irChart",type:F,label:s("CHART"),hide:!0,icon:"icon-irr-chart",action:function(){o._controlsGet(C)}},{id:"irGroupBy",type:F,label:s("GROUP_BY"),hide:!0,icon:"icon-irr-group-by",action:function(){o._controlsGet(D)}},{id:"irPivot",type:F,label:s("PIVOT"),hide:!0,icon:"icon-irr-pivot",action:function(){o._controlsGet(A)}},{type:"separator"},{id:"irReport",type:"subMenu",label:s("REPORT"),hide:!1,icon:"icon-irr-saved-report",menu:{items:[{id:"irSaveReport",type:F,label:s("SAVE_REPORT"),hide:!0,icon:"icon-ig-save",action:function(){o._controlsGet(V)}},{id:"irSaveDefault",type:F,label:s("SAVE_REPORT_DEFAULT"),hide:!0,icon:"icon-ig-save",action:function(){o._controlsGet(P)}},{type:"separator"},{id:"irReset",type:F,label:s("RESET"),hide:!0,icon:"icon-irr-reset",action:function(){o._controlsGet(M)}}]}},{type:"separator"},{id:"irDownload",type:F,label:s("DOWNLOAD"),hide:!0,icon:"icon-irr-download",action:function(){o._controlsGet(H)}},{id:"irNotify",type:F,label:s("SUBSCRIPTION"),hide:!0,icon:"icon-irr-subscription",action:function(){o._controlsGet(B)}},{type:"separator"},{id:"irHelp",type:F,label:s("HELP"),hide:!0,icon:"icon-irr-help",action:function(){n.popup.url(o.options.helpLink)}}],beforeOpen:function(t,n){var _,h,d,u=n.menu.items,g=r(u,"irData"),R=g.menu.items,v=r(R,"irOrdering"),T=r(R,"irAggregate"),I=r(R,"irFlashback"),w=r(R,"irCompute"),b=r(R,"irGroupBySort"),O=r(R,"irPivotSort"),C=r(u,"irFormat"),D=C.menu.items,k=r(D,"irCtrlBreak"),A=r(D,"irHighlight"),S=r(D,"irRowsPerPage"),L=r(u,"irReport"),y=L.menu.items;if(o._dialogReset(),o._sortWidgetHide(),r(u,"irColumn").hide=!(a.selectColumns&&o.viewMode===p),r(u,"irFilter").hide=!a.filter,g.hide=!0,o.viewMode===p?(a.sort||a.aggregate||a.flashback||a.compute)&&(g.hide=!1,v.hide=!a.sort,T.hide=!a.aggregate,I.hide=!a.flashback,w.hide=!a.compute,b.hide=!0,O.hide=!0):o.viewMode===f?a.groupBy&&(g.hide=!1,v.hide=!0,T.hide=!0,I.hide=!a.flashback,w.hide=!0,b.hide=!1,O.hide=!0):o.viewMode===m?a.pivot&&(g.hide=!1,v.hide=!0,T.hide=!0,I.hide=!a.flashback,w.hide=!0,b.hide=!0,O.hide=!1):o.viewMode===E&&(g.hide=!1,v.hide=!0,T.hide=!0,I.hide=!a.flashback,w.hide=!0,b.hide=!0,O.hide=!0),C.hide=!0,o.viewMode===p?(a.controlBreak||a.highlight)&&(C.hide=!1,k.hide=!a.controlBreak,A.hide=!a.highlight,S.hide=!a.rowsPerPage):o.viewMode===f?a.groupBy&&(C.hide=!1,k.hide=!0,A.hide=!0,S.hide=!a.rowsPerPage):o.viewMode===m?a.pivot&&(C.hide=!1,k.hide=!0,A.hide=!0,S.hide=!a.rowsPerPage):o.viewMode===E&&(C.hide=!1,k.hide=!0,A.hide=!0,S.hide=!a.rowsPerPage),a.rowsPerPage){for((S=r(D,"irRowsPerPage")).menu.items[0].choices=[],h=S.menu.items[0].choices,d=c(a.maxRowsPerPage,a.maxRowCount),i=0;i<l.length&&(_=l[i],!(d&&_>d));i++)h.push({label:""+_,value:_});a.maxRowsPerPage||h.push({label:s("ALL"),value:1e5})}o.viewMode===p?(a.chart||a.groupBy||a.pivot)&&(r(u,"irChart").hide=!a.chart,r(u,"irGroupBy").hide=!a.groupBy,r(u,"irPivot").hide=!a.pivot):o.viewMode===f?a.groupBy&&(r(u,"irChart").hide=!0,r(u,"irGroupBy").hide=!1,r(u,"irPivot").hide=!0):o.viewMode===m?a.pivot&&(r(u,"irChart").hide=!0,r(u,"irGroupBy").hide=!0,r(u,"irPivot").hide=!1):o.viewMode===E&&(r(u,"irChart").hide=!1,r(u,"irGroupBy").hide=!0,r(u,"irPivot").hide=!0),L.hide=!0,(a.saveReport||a.saveDefaultReport||a.reset)&&(L.hide=!1,r(y,"irSaveReport").hide=!a.saveReport,r(y,"irSaveDefault").hide=!a.saveDefaultReport,r(y,"irReset").hide=!a.reset),r(u,"irDownload").hide=!(a.download&&-1!==e.inArray(o.viewMode,[p,f,m])),r(u,"irNotify").hide=!(a.subscription&&-1!==e.inArray(o.viewMode,[p,f,m])),r(u,"irHelp").hide=!a.help}}:{items:[{id:"irColumn",type:F,label:s("SELECT_COLUMNS"),hide:!0,icon:"icon-irr-select-cols",action:function(){o._controlsGet(R,"COLUMN")}},{type:"separator"},{id:"irFilter",type:F,label:s("FILTER"),hide:!0,icon:"icon-irr-filter",action:function(){o._controlsGet(v)}},{id:"irRowsPerPage",type:"subMenu",label:s("ROWS_PER_PAGE"),hide:!0,icon:"icon-irr-rows",menu:{items:[{type:"radioGroup",set:function(e){o.options.currentRowsPerPage=1*e,o._search("SEARCH")},get:function(){return o.options.currentRowsPerPage},choices:[]}]}},{id:"irFormat",type:"subMenu",label:s("FORMAT"),hide:!1,icon:"icon-irr-format",menu:{items:[{id:"irOrdering",type:F,label:s("SORT"),hide:!0,icon:"icon-irr-sort",action:function(){o._controlsGet(I)}},{id:"irCtrlBreak",type:F,label:s("CONTROL_BREAK"),hide:!0,icon:"icon-irr-control-break",action:function(){o._controlsGet(w)}},{id:"irHighlight",type:F,label:s("HIGHLIGHT"),hide:!0,icon:"icon-irr-highlight",action:function(){o._controlsGet(T)}},{id:"irCompute",type:F,label:s("COMPUTE"),hide:!0,icon:"icon-irr-compute",action:function(){o._computationShow()}},{id:"irAggregate",type:F,label:s("AGGREGATE"),hide:!0,icon:"icon-irr-aggregate",action:function(){o._controlsGet(O)}},{id:"irChart",type:F,label:s("CHART"),hide:!0,icon:"icon-irr-chart",action:function(){o._controlsGet(C)}},{id:"irGroupBySort",type:F,label:s("GROUP_BY_SORT"),hide:!0,icon:"icon-irr-sort",action:function(){o._controlsGet(k)}},{id:"irGroupBy",type:F,label:s("GROUP_BY"),hide:!0,icon:"icon-irr-group-by",action:function(){o._controlsGet(D)}},{id:"irPivotSort",type:F,label:s("PIVOT_SORT"),hide:!0,icon:"icon-irr-sort",action:function(){o._controlsGet(S)}},{id:"irPivot",type:F,label:s("PIVOT"),hide:!0,icon:"icon-irr-pivot",action:function(){o._controlsGet(A)}}]}},{type:"separator"},{id:"irFlashback",type:F,label:s("FLASHBACK"),hide:!0,icon:"icon-irr-flashback",action:function(){o._controlsGet(L)}},{type:"separator"},{id:"irSaveReport",type:F,label:s("SAVE_REPORT"),hide:!0,icon:"icon-irr-saved-report",action:function(){o._controlsGet(V)}},{id:"irSaveDefault",type:F,label:s("SAVE_REPORT_DEFAULT"),hide:!0,icon:"icon-irr-saved-report",action:function(){o._controlsGet(P)}},{id:"irReset",type:F,label:s("RESET"),hide:!0,icon:"icon-irr-reset",action:function(){o._controlsGet(M)}},{type:"separator"},{id:"irHelp",type:F,label:s("HELP"),hide:!0,icon:"icon-irr-help",action:function(){n.popup.url(o.options.helpLink)}},{type:"separator"},{id:"irDownload",type:F,label:s("DOWNLOAD"),hide:!0,icon:"icon-irr-download",action:function(){o._controlsGet(H)}},{id:"irNotify",type:F,label:s("SUBSCRIPTION"),hide:!0,icon:"icon-irr-subscription",action:function(){o._controlsGet(B)}}],beforeOpen:function(t,n){var _,h,d,u,g=n.menu.items,R=r(g,"irFormat"),v=R.menu.items,T=r(v,"irOrdering"),I=r(v,"irCtrlBreak"),w=r(v,"irHighlight"),b=r(v,"irCompute"),O=r(v,"irAggregate"),C=r(v,"irChart"),D=r(v,"irGroupBySort"),k=r(v,"irGroupBy"),A=r(v,"irPivotSort"),S=r(v,"irPivot");if(o._dialogReset(),o._sortWidgetHide(),r(g,"irColumn").hide=!(a.selectColumns&&o.viewMode===p),r(g,"irFilter").hide=!a.filter,r(g,"irRowsPerPage").hide=!a.rowsPerPage,R.hide=!0,o.viewMode===p?(a.sort||a.controlBreak||a.highlight||a.compute||a.aggregate||a.chart||a.groupBy||a.pivot)&&(R.hide=!1,T.hide=!a.sort,I.hide=!a.controlBreak,w.hide=!a.highlight,b.hide=!a.compute,O.hide=!a.aggregate,C.hide=!a.chart,D.hide=!0,k.hide=!a.groupBy,A.hide=!0,S.hide=!a.pivot):o.viewMode===f?a.groupBy&&(R.hide=!1,T.hide=!0,I.hide=!0,w.hide=!0,b.hide=!0,O.hide=!0,C.hide=!0,D.hide=!1,k.hide=!1,A.hide=!0,S.hide=!0):o.viewMode===m?a.pivot&&(R.hide=!1,T.hide=!0,I.hide=!0,w.hide=!0,b.hide=!0,O.hide=!0,C.hide=!0,D.hide=!0,k.hide=!0,A.hide=!1,S.hide=!1):o.viewMode===E&&(R.hide=!1,T.hide=!0,I.hide=!0,w.hide=!0,b.hide=!0,O.hide=!0,C.hide=!1,D.hide=!0,k.hide=!0,A.hide=!0,S.hide=!0),r(g,"irFlashback").hide=!a.flashback,r(g,"irSaveReport").hide=!a.saveReport,r(g,"irSaveDefault").hide=!a.saveDefaultReport,r(g,"irReset").hide=!a.reset,r(g,"irHelp").hide=!a.help,r(g,"irDownload").hide=!(a.download&&-1!==e.inArray(o.viewMode,[p,f,m])),r(g,"irNotify").hide=!(a.subscription&&-1!==e.inArray(o.viewMode,[p,f,m])),a.rowsPerPage){for((h=r(g,"irRowsPerPage")).menu.items[0].choices=[],d=h.menu.items[0].choices,u=c(a.maxRowsPerPage,a.maxRowCount),i=0;i<l.length&&(_=l[i],!(u&&_>u));i++)d.push({label:""+_,value:_});a.maxRowsPerPage||d.push({label:s("ALL"),value:1e5})}}},a.toolbar&&a.actionsMenu&&o._getElement("actions_menu").menu(t)},_initOnCreate:function(){function t(t){this.currentElementId=e(t.target).attr("id")}var i=this.options,o=this;i.toolbar&&this._initToolbar(!0),this._initControlPanel(),e(document.body).append(this._getElement("sort_widget")),this._on(this.element,{focusin:t,"click button, input[type=checkbox]":t}),this._on(this.element,{"click a.a-IRR-headerLink":function(t){this.viewMode===p?this._controlsGet("SORT_WIDGET",e(t.currentTarget).data("column")):this.viewMode===f?this._controlsGet(k):this.viewMode===m&&this._controlsGet(S),t.preventDefault()}}),this._on(this.element,{"click button.a-IRR-button--pagination":function(t){i.detailLink&&"SHOW_DETAIL"===this.currentControl?this._controlsRow(e(t.currentTarget).data("row-id")):i.pagination&&this._paginate(e(t.currentTarget).data("pagination"))},"click a.a-IRR-pagination-reset":function(e){this._search("SEARCH"),e.preventDefault()}}),i.pagination&&this._on(this.element,{"click a.a-IRR-pagination-reset":function(e){this._search("SEARCH"),e.preventDefault()}}),i.detailLink&&this._on(this.element,{"click a.a-IRR-detail-row":function(t){this._controlsRow(e(t.currentTarget).data("row-id")),t.preventDefault()}}),this._initFixedHeader(),apex.widget.util.onVisibilityChange(this.element[0],(function(e){e&&(o.element.find(".js-stickyTableHeader").trigger("forceresize"),o.needsLazyLoading&&(o.needsLazyLoading=!1,o.refresh()))}))},_initToolbar:function(t){var i=this.options,o=this;i.searchField&&(this._on(this._getElement("search_field"),{keydown:function(t){t.which===e.ui.keyCode.ENTER&&(this._search("SEARCH"),t.preventDefault())}}),this._on(this._getElement("search_button"),{click:function(e){this._search("SEARCH"),e.preventDefault()}}),i.columnSearch&&t&&this._getElement("column_search_drop").menu({asyncFetchMenu:function(e,t){o.searchMenu=e,o.searchMenuCallback=t,o._controlsGet("SEARCH_COLUMN")},afterClose:function(e,t){t.actionTaken&&setTimeout((function(){o._getElement("search_field").focus()}),100)},items:[]})),i.rowsPerPageSelect&&this._on(this._getElement("row_select"),{change:function(e){var t=e.target.value;this._search("SEARCH",t),e.preventDefault()}}),i.reportsSelect&&this._on(this._getElement("saved_reports"),{change:function(e){var t=e.target.value;this._pull("REPORT_CHANGED",t),e.preventDefault()}}),this._on(this._getElement("toolbar_controls"),{"click .a-IRR-button--views":function(t){switch(e(t.currentTarget).data("view")){case"report":this._reportView(p);break;case"icon":this._reportView("ICON");break;case"details":this._reportView("DETAIL");break;case"chart":this._chartView();break;case"group_by":this._groupByView();break;case"pivot":this._pivotView()}}}),i.actionsMenu&&t&&this._initMenus()},_inlinePicker:function(i,o){var n,a,l=t.htmlBuilder(),r=JSON.parse(o),s=e("[data-picker-for="+t.escapeCSS(this.tempReturnElement$.attr("id"))+"]",this._getElement($)),c=e("body"),_=e("#"+this.tempReturnElement$.attr("id"));for(l.markup("<div").attr("id",this._getId("col_values_drop")).attr("class","a-IRR-col-values-drop").attr("style","top: "+(_.offset().top+_.outerHeight())+"px; left:"+_.offset().left+"px").markup(">"),n=0;n<r.row.length;n++)l.markup("<a").attr("href","#").attr("class","a-IRR-col-value").attr("data-return-value",r.row[n].R).markup(">").markup(r.row[n].D).markup("</a>");return l.markup("</div>"),c.after(l.toString()),a=e("#"+this._getId("col_values_drop")),"NARROW"===i?this._on(a,{"click a.a-IRR-col-value":function(t){var i,o=e(t.currentTarget).data("returnValue"),n=this._dialogCurrentOperator().val();"in"===n||"not in"===n?((i=this.tempReturnElement$.val())&&(o=i+","+o),this.tempReturnElement$.val(o)):(this.tempReturnElement$.val(o),a.remove(),this.tempReturnElement$.focus()),t.preventDefault()}}):this._on(a,{"click a.a-IRR-col-value":function(t){var i=e(t.currentTarget).data("returnValue");this.tempReturnElement$.val(i),a.remove(),this.tempReturnElement$.focus(),t.preventDefault()}}),this._on(a,{"keydown a":function(t){var i=a.find("a"),o=i.index(e(t.target)),n=i.length-1;switch(i.attr("tabindex",-1),t.which){case e.ui.keyCode.DOWN:o<n?i.eq(o+1).focus():i.eq(0).focus(),t.preventDefault();break;case e.ui.keyCode.UP:o>0?i.eq(o-1).focus():i.eq(n).focus(),t.preventDefault();break;case e.ui.keyCode.TAB:a.remove(),s.focus(),t.preventDefault();break;case e.ui.keyCode.ESCAPE:a.remove(),s.focus(),t.stopImmediatePropagation()}}}),this._dialogCheck(this._getIdSelector("col_values_drop"),(function(){a.remove()})),a.find("a:first")},_paginate:function(e){this._action(K,{widgetActionMod:e})},_notifyClear:function(){this._action("DELETE_NOTIFY",{id:this._getDialogElement("notify_id").val()})},_notifySave:function(){var e=[this._getId("notify_id"),this._getId("email_address"),this._getId("email_subject"),this._getId("notify_interval"),this._getId("skip_if_ndf"),this._getId("start_date"),this._getId("end_date"),this._getId("download_format"),this._getId("data_only"),this._getId("pdf_page_size"),this._getId("pdf_orientation"),this._getId("strip_rich_text"),this._getId("accessible")],t=[this._getId("download_format")];$f_get_emptys(t,"error","")||this._action("SAVE_NOTIFY",{f01:e,f02:this._utilGetFormElValues(e)})},_pivotMaxValue:3,_pivotRemove:function(){this._action("DELETE_PIVOT")},_pivotSave:function(){var e=this._utilGetFormElAttributes();this._action("SAVE_PIVOT",{f01:e.ids,f02:e.values})},_pivotSort:function(e){var t,i=this._getDialogElement("pivot_id").val();e===U||e===W?(this.lastColumnId=e.id,this._action("PIVOT_COLUMN_SORT",{id:i,f01:this.lastColumnId,f02:e})):(t=this._utilGetFormElAttributes(),this._action("PIVOT_SORT",{id:i,f01:t.ids,f02:t.values}))},_pivotView:function(){this._action("VIEW_PIVOT")},_pull:function(t,i,o){var n=e.extend({widgetMod:"PULL",widgetAction:t},o);i&&(this.reportId=i),this._get(n)},_remove:function(e){var t="DELETE";e&&(t=e),this._action(t)},_reportView:function(e){this.options.reportViewMode=e,this._action("VIEW_REPORT",{p_widget_view_mode:this.options.reportViewMode})},_reset:function(){this._action("RESET")},_save:function(e){var t=[],i="SAVE",o=this._getId("report_name");$f_get_emptys([o],"error","")||(e&&(i="RENAME"),t.push(o),t.push(this._getId("public_report")),t.push(this._getId("report_description")),this._action(i,{f01:t,f02:this._utilGetFormElValues(t)}),this._getElement($).dialog("close"))},_saveDefault:function(e){var t,i=[],o=[],n="SAVE_DEFAULT",a=this._getId("default_type"),l=$v(a),r=this._getId("report_name");"ALTERNATIVE"===l&&(t=$f_get_emptys([r],"error","")),t||(e&&(n=e),i.push(a),o.push(l),"ALTERNATIVE"===l&&(i.push(r),o.push(this._getDialogElement("report_name").val())),this._action(n,{f01:i,f02:o}),this._getElement($).dialog("close"))},_saveDefaultTypeCheck:function(e){var t="ALTERNATIVE"===e;this._getDialogElement("report_name").closest(".u-Form-fieldContainer").toggle(t)},_search:function(e,t){var i,o,n=this.options,a=this._getElement("search_field").val();t&&(n.rowsPerPage||n.rowsPerPageSelect)&&(n.currentRowsPerPage=1*t),i={f01:(o=this._utilGetFormElAttributes(this._getId("toolbar_controls"))).ids,f02:o.values},""===a?this._pull(null,this.reportId,i):this._action("QUICK_FILTER",i)},_setDateFieldFormatMask:function(e,t){var i,o,n,a=!1;e.length>0&&t&&(/HH|hh|ii|ss/.test(t)&&(a=!0,i=/HH/.test(t)),o=e.val(),n=e.datepicker("option","dateFormat"),e.datepicker("option","onSelect",null),e.datepicker("option","showTime",a).datepicker("option","showButtonPanel",a).datepicker("option","dateFormat",t),a&&e.datepicker("option","time24h",i),e.val(""),t===n&&e.val(o))},_singleRowViewClear:function(){var e=this._getElement("single_row_view"),t=this._getElement("report_view");return this._off(e),this._off(t),e.html(""),e},_singleRowViewControl:function(){var t=this._getElement("exclude_nulls"),i=this._getElement("show_displayed_only"),o=t.prop(Y),n=i.prop(Y),a=e("div.a-IRR-singleRow-row",this.element),l=a.filter(".is-displayed"),r=a.not(".is-displayed"),s=a.filter(".is-null");l.show(),r.show(),s.show(),o&&n?(s.hide(),r.hide()):o?s.hide():n&&r.hide(),this._action("CHANGE_DETAIL_OPTION",{value:o?t.val():"",x05:n?i.val():""})},_singleRowViewHide:function(){this._singleRowViewClear().hide()},_singleRowViewShow:function(t){var i=this._singleRowViewClear();this._getElement("full_view").hide(),this._getElement("data_panel").val(""),this._getElement($).html(""),i.html(t).show(),i.find(":focusable")[0].focus(),this.options.detailLink&&(this._on(this._getElement("report_view"),{click:function(t){this._pull(null,e(t.target).data("report-id"))}}),this._on(i,{"click input.a-IRR-viewOptions-checkbox":function(){this._singleRowViewControl()}}),e(".a-IRR-singleRow-group").collapsible({collapsed:!1}))},_sortWidgetHide:function(){var t,i,o,n=this._getElement("sort_widget");n.is(":visible")&&(t=this._getElement("sort_widget_rows"),i=this._getElement("sort_widget_search_field"),o=e("[data-column="+this.lastColumnId+"]",this.element),n.removeAttr("style").css({position:"absolute",display:"none"}),o.closest(".a-IRR-header").removeClass(g),t.html(""),e("button.a-IRR-sortWidget-button",this.element).removeClass(g),this._off(n),this._off(t),this._off(i))},_sortWidgetSearch:function(e,t){var i=t?"contains":"=",o=[this.currentColumnId,i,e,"",""];this._sortWidgetHide(),this._action("COL_FILTER",{f01:o})},_sortWidgetShow:function(i){function o(e){var t=d.find(":focusable");e||(a=t.first()).data("first",!0),(l=t.last()).data("last",!0)}var n,a,l,r,s,c=JSON.parse(i),h=t.htmlBuilder(),d=this._getElement("sort_widget"),u=this._getElement("sort_widget_help"),p=this._getElement("sort_widget_rows"),f=e("[data-column='"+this.currentColumnId+"']",this.element),m=this._getElement("sort_widget_search"),E=this._getElement("sort_widget_search_field");if(this.computationId=c.dialog.id,u.hide(),e("button.a-IRR-sortWidget-button",d).parent().show(),e.each(c.dialog.hide,(function(t,i){e(_(i),d).hide()})),c.dialog.leadSortDir&&(c.dialog.leadSortDir===U?this._getElement("sort_widget_action_up").find("button.a-IRR-sortWidget-button").addClass(g):c.dialog.leadSortDir===W&&this._getElement("sort_widget_action_down").find("button.a-IRR-sortWidget-button").addClass(g)),c.dialog.uv){for(r=c.dialog.row.length,n=0;n<r;n++)(0===c.dialog.row[n].R||c.dialog.row[n].R)&&(s=0===c.dialog.row[n].D||c.dialog.row[n].D?c.dialog.row[n].D:c.dialog.row[n].R,h.markup("<a").attr("href","#").attr("data-return-value",c.dialog.row[n].R).attr("class","a-IRR-sortWidget-row").markup(">").markup(s).markup("</a>"));p.append(h.toString()),m.show(),E.val("")}else m.hide();d.show().position({my:"left top",at:"left bottom",of:f}),f.closest(".a-IRR-header").addClass(g),this.lastColumnId=this.currentColumnId,this._on(d,{"click button.a-IRR-sortWidget-button":function(t){switch(e(t.currentTarget).data("option")){case"up":this._columnOrder(U);break;case"down":this._columnOrder(W);break;case"hide":this._columnHide();break;case"break":this._controlBreakOn();break;case"help":this._columnHelp();break;case"computation":this._computationShow()}},keydown:function(t){if(t.which===e.ui.keyCode.ESCAPE&&(this._sortWidgetHide(),t.preventDefault(),f.focus()),t.which===e.ui.keyCode.TAB){var i=!!t.shiftKey;!i&&e(t.target).data("last")&&(t.preventDefault(),a.focus()),i&&e(t.target).data("first")&&(t.preventDefault(),l.focus())}}}),this._on(p,{"click a":function(t){this._sortWidgetSearch(e(t.currentTarget).data("returnValue")),t.preventDefault()}}),this._on(E,{keyup:function(e){l.data("last",!1),$d_Find(this._getId("sort_widget_rows"),e.target.value,"a"),o(!0)},keydown:function(t){t.which===e.ui.keyCode.ENTER&&(this._sortWidgetSearch(e(t.target).val(),!0),t.preventDefault())}}),this._dialogCheck(null,this._sortWidgetHide),o(),a.focus()},_utilGetFormEls:function(t){return e(_(t)+" :input").not("button")},_utilGetFormElAttributes:function(e){var t,i=[],o=[];return t=e||this._getId($),this._utilGetFormEls(t).each((function(e,t){i.push(t.id),o.push($v(t.id))})),{ids:i,values:o}},_utilGetFormElValues:function(e){var t,i=[];for(t=0;t<e.length;t++)i.push($v(e[t]));return i},_utilReplaceAttrText:function(e,t,i,o){var n=e.attr(t).replace(i,o);e.attr(t,n)},_utilAddMoreColumn:function(t,i){var o,n,a,l,r,s,c,_,h=this._getElement($);(o=e("select."+i,h).length)<t&&(a=o+1,(n=o)<10?(l="0"+n,r="0"+a):(l=n+"",r=a+""),c=(s=e("div."+i+"-row-"+n,h)).clone(),this._utilReplaceAttrText(c,"class",n,a),e("."+d,c).text(a),_=e("select."+i,c),this._utilReplaceAttrText(_,"id",new RegExp(l+"$"),r),e("label",c).each((function(){var t=e(this);t.attr("for",t.attr("for").replace(new RegExp(l+"$"),r)),t.text(t.text().replace(n,a))})),c.insertAfter(s)),a===t&&(e("."+i+"-add",h).hide(),c.focus())},_utilAddMoreFunction:function(t){var i,o,n,a,l,r,s,c,_,h,u,g,p,f,m=this._getElement($);(i=e("select.a-IRR-function",m).length)<t&&(n=i+1,(o=i)<10?(a="0"+o,l="0"+n):(a=o+"",l=n+""),s=(r=e("div.a-IRR-function-row-"+o,m)).clone(),this._utilReplaceAttrText(s,"class",o,n),e("."+d,s).text(n),c=e("select.a-IRR-function",s),this._utilReplaceAttrText(c,"id",new RegExp(a+"$"),l),this._utilReplaceAttrText(e(this._getIdSelector("number_columns_container")+"_"+a,s),"id",new RegExp(a+"$"),l),this._utilReplaceAttrText(e(this._getIdSelector("all_columns_container")+"_"+a,s),"id",new RegExp(a+"$"),l),_=e("select.a-IRR-function-num-col",s),this._utilReplaceAttrText(_,"id",new RegExp(a+"$"),l),h=e("select.a-IRR-function-col",s),this._utilReplaceAttrText(h,"id",new RegExp(a+"$"),l),u=e(this._getIdSelector("label")+"_"+a,s),this._utilReplaceAttrText(u,"id",new RegExp(a+"$"),l),u.val(""),g=e(this._getIdSelector("format_mask")+"_"+a,s),this._utilReplaceAttrText(g,"id",new RegExp(a+"$"),l),g.val(""),p=e(this._getIdSelector("format_mask_picker")+"_"+a,s),this._utilReplaceAttrText(p,"id",new RegExp(a+"$"),l),this._utilReplaceAttrText(p,"data-picker-for",new RegExp(a+"$"),l),f=e(this._getIdSelector("function_sum")+"_"+a,s),this._utilReplaceAttrText(f,"id",new RegExp(a+"$"),l),f.prop(Y,!1),e("label",s).each((function(){var t=e(this);t.attr("for",t.attr("for").replace(new RegExp(a+"$"),l)),t.hasClass("a-Switch")?t.attr("aria-labelledby",t.attr("aria-labelledby").replace(new RegExp(a+"$"),l)):t.text(t.text().replace(o,n))})),s.insertAfter(r)),n===t&&(e(".a-IRR-add-function",m).hide(),s.focus())},_validAction:function(e){"true"===e?(this._pull("PULL_TOOLBAR"),this._getElement($).dialog("close")):(this._getDialogElement("dialog_msg").html(e),this.options.reportViewMode=p)},refresh:function(){this._pull()}})}(apex.jQuery,apex.util,apex.debug,apex.server,apex.navigation,apex.lang,apex.theme,apex.message);