!function(e,t,o,r,l){"use strict";const a=t.ui.keyCode,n=navigator.appVersion.includes("Mac"),i="INLINE",s="POPUP",c="COLOR_ONLY",u="NATIVE",d="HEX",p="RGB",h="RGBA",C="HSL",f="HSLA",m="CSS",g={HEX:"#3caf85",RGB:"rgb(60, 175, 133)",RGBA:"rgba(60, 175, 133, 0.5)",HSL:"hsl(158, 49%, 46%)",HSLA:"hsla(158, 49%, 46%, 0.5)",CSS:"#3caf85"},v="disabled",k="u-hidden",$="aria-expanded",P="a-ColorPicker-preview",S=P+"--current",_=P+"--initial",x=P+"-value",w="a-ColorPicker-contrast",b=w+"Icon",y=w+"Result",A=w+"Rating",L=w+"Color1",R=w+"Color2",j="apex-item-color-picker-preview",I=j+"--noPreview",H="a-ColorPicker-detail",B=H+"--rgb",V=H+"--hsl",E=H+"--hex",D=H+"Item",T=D+"--a",q=H+"Input",O="a-ColorPicker-detailsToggle",G="a-ColorPicker-preset",N=G+"MenuButton",M="background-color",U=/hsla?\(\s*(\d+),\s*(\d+)%,\s*(\d+)%(?:,\s*(\d+.\d+))?\s*\)/,F=/^(#)?([a-f0-9]{3}|[a-f0-9]{6})$/i,X=/^([01]?[0-9]{1,2}|2[0-4][0-9]|25[0-5])$/i,W=/^([0-9]*\.)?[0-9]{1,2}$/i,K=/^([012]?[0-9]{1,2}|3[0-5][0-9])$/i,z=/^([0]?[0-9]{1,2}|100)$/i;function Q(e){return l.getMessage("APEX.COLOR_PICKER."+e)}function Y(e){return getComputedStyle(document.documentElement).getPropertyValue(e.trim())}function J(e,t){e.css(M,t.toString())}function Z(e){return`<div ${e?'id="'+e+'"':""} class="${w}"><span class="a-ColorPicker-contrastText">${Q("CONTRAST")}</span><div class="a-ColorPicker-contrastColorCheck"><span class="${L}"></span><span class="${R}"></span></div><span class="${y}"></span><span class="${A}"></span><span aria-hidden="true" class="${b} a-Icon"></span></div>`}function ee(e,t){let o,r,l="",a=!1;e.children().toggle(!!t),t?(t.aaa_small?(o="icon-check u-success-text",l="AAA"):t.aa_small?(o="icon-check u-success-text",l="AA"):(o="icon-warning u-warning-text",a=!0),r=Math.round(100*(t.ratio+Number.EPSILON))/100,e.toggleClass("is-warning",a).find("."+b).removeClass("icon-check icon-warning u-success-text u-warning-text").addClass(o),e.find("."+y).text(r),e.find("."+A).text(l),J(e.find("."+L),t.color_1),J(e.find("."+R),t.color_2)):e.removeClass("is-warning")}function te(e,t,o,r){let l=[],a=null,n=[];if(e.markup(`<div id="${t}presets" class="a-ColorPicker-presets">`),"THEME"===o)for(let e=0;e<15;e++){let t=Y("--a-color-picker-preset-"+(e+1));t&&l.push(t)}else l=o.split(";");let i=l.slice(0,r),s=l.slice(r);for(let t=0;t<i.length;t++){let o=i[t].trim(),r=ae.getValidColor(o);if(r){let t=M+":"+r.toString()+";";e.markup(`<button type="button" class="a-Button ${G}" aria-label="${o}"`).optionalAttr("style",t).attr("data-color-value",o).markup("></button>")}}if(s.length){a=t+"presetMenu",e.markup(`<button type="button" data-menu="${a}"class="a-Button ${G} ${N}"><span aria-hidden="true" class="a-Icon icon-down-chevron"></span></button>\n<div id="${a}" class="a-ColorPicker-presetMenu"></div>`);for(let e=0;e<s.length;e++){let t=s[e];n.push({type:"action",iconType:"a-Icon",icon:"icon-color-preview",iconStyle:"color:"+ae.getValidColor(t)+";",value:t,label:t})}}return e.markup("</div>"),n}function oe(e,o,l){let a=r.escapeCSS(e),n=t("#"+a+"presets"),i=n.find("."+G).not("."+N),s=n.find("."+N),c=t("#"+a+"presetMenu");i.click((function(){let e=t(this).attr("data-color-value");l(e)})),s&&(o.forEach((e=>{e.action=function(){l(e.value)}})),c.menu({items:o}))}apex.widget.util.colorPicker={renderColorContrastReport:Z,updateColorContrastReport:ee};const re={render:function(){this.colorSpectrumContent$=t(this._render());let e=this.colorSpectrumContent$.find(".color-spectrum");return e[0].value=new ae.getValidColor("#000000"),t(document.body).append(this.colorSpectrumContent$),ae.whenReady(e[0])},initialize:function(e){let o,r,l;const i=()=>{let e=o.find("."+H),t=e.not(".u-hidden"),r=t.next("."+H);if(!t.length){let t=this.returnAs.substr(0,3).toLowerCase();["hex","rgb","hsl"].includes(t)||(t="hex"),r=e.filter(".a-ColorPicker-detail--"+t)}t.addClass(k),r.length?r.removeClass(k):e.eq(0).removeClass(k)},s=e=>{let t=ae.getValidColor(e);null!==t&&(this.colorSpectrum$[0].value=t)},c=e=>{let o,r=t(e.target);if(r[0]===this.colorSpectrum$[0])o=e.detail.value,this._setColorDetailRGB(o),this._setColorDetailHSL(o),this._setColorDetailHex(o);else if(r.hasClass(q)){let e=r.closest("."+H);if(e.hasClass(E)){if(o=this._getHexDetailColor(),null===o)return void this._setColorDetailHex(this.ojColorCurrent)}else if(e.hasClass(V)){if(o=this._getHSLDetailColor(),null===o)return void this._setColorDetailHSL(this.ojColorCurrent)}else if(o=this._getRGBDetailColor(),null===o)return void this._setColorDetailRGB(this.ojColorCurrent);this.colorSpectrum$[0].value=o}J(this.colorPreviewCurrent$,o.toString()),this.ojColorCurrent=o,this.valueChanged(o),this.contrastCheck&&this.updateColorContrast()};o=this.colorSpectrumContent$,e.empty().append(o),this.colorSpectrum$=o.find(".color-spectrum"),this.colorPreviewCurrent$=o.find("."+S+" ."+x),this.colorPreviewInitial$=o.find("."+_+" ."+x),this.colorSpectrumContrast$=o.find("."+w),r=o.find("."+q),l=o.find("."+O),this.showAlpha||this.colorSpectrum$.parent().find(".oj-colorspectrum-alpha").closest(".oj-slider").hide(),this.colorSpectrum$.on("transientValueChanged",c),r.on("change",c),l.on("click",i),i(),this.presetColors&&oe(this.idPrefix,this.colorPresetsMenuItems,s),o.closest(".ui-dialog,.a-ColorPicker-inlineWrap").on("keydown",(e=>{let t=e.which;(90===t&&(!n&&e.ctrlKey||n&&e.metaKey)||t===a.BACKSPACE)&&"INPUT"!==e.target.nodeName&&(e.preventDefault(),this.revert())})),o.find(".a-ColorPicker-preview--initial .a-ColorPicker-preview-value").click((()=>{this.revert()}))},setColor:function(e,t){let o=ae.getValidColor(e);o||(o=ae.makeColor("000000")),this.ojColorCurrent=o,t&&(this.ojColorInitial=o),this.showAlpha||1!==this.ojColorInitial.getAlpha()&&(this.ojColorInitial._a=1),this.colorSpectrum$[0].value=o,J(this.colorPreviewCurrent$,o),t&&J(this.colorPreviewInitial$,o),this._setColorDetailRGB(o),this._setColorDetailHSL(o),this._setColorDetailHex(o),this.updateColorContrast()},revert:function(){this.colorSpectrum$[0].value=this.ojColorInitial},getColor:function(){return this.ojColorCurrent},getCurrentFormat:function(){return this.colorSpectrumContent$.find("."+H).not(".u-hidden").attr("data-format")},updateColorContrast:function(){let e=this.getContrast();ee(this.colorSpectrumContrast$,e)},_setColorDetailRGB:function(e){let t=this.colorSpectrumContent$.find("."+B+" input");t.eq(0).val(e.getRed()),t.eq(1).val(e.getGreen()),t.eq(2).val(e.getBlue()),this.showAlpha&&t.eq(3).val(e.getAlpha())},_setColorDetailHSL:function(e){let t=this.colorSpectrumContent$.find("."+V+" input"),o=ae.ojColorToHSL(e);t.eq(0).val(o.h),t.eq(1).val(o.s),t.eq(2).val(o.l),this.showAlpha&&t.eq(3).val(o.a)},_setColorDetailHex:function(e){let t=this.colorSpectrumContent$.find("."+E+" input"),o=ae.colorConverterHEX.format(e);t.val(o.replace("#",""))},_getHexDetailColor:function(){let e=this.colorSpectrumContent$.find("."+E+" input").val();return F.test(e)?ae.makeColor(e):null},_getHSLDetailColor:function(){let e,t=this.colorSpectrumContent$.find("."+V+" input"),o=t.eq(0).val(),r=t.eq(1).val(),l=t.eq(2).val(),a=this.showAlpha?t.eq(3).val():"1";return K.test(o)&&z.test(r)&&z.test(l)?(e=parseFloat(a),this.showAlpha&&(!W.test(a)||e<0||e>1)?null:ae.makeColor({h:o,s:r,l:l,a:a})):null},_getRGBDetailColor:function(){let e,t=this.colorSpectrumContent$.find("."+B+" input"),o=t.eq(0).val(),r=t.eq(1).val(),l=t.eq(2).val(),a=this.showAlpha?t.eq(3).val():"1";return X.test(o)&&X.test(r)&&X.test(l)?(e=parseFloat(a),this.showAlpha&&(!W.test(a)||e<0||e>1)?null:ae.makeColor({r:o,g:r,b:l,a:a})):null},_render:function(){let e,t,o=this.idPrefix,l="a-ColorPicker--simple",a=r.htmlBuilder();const n=(e,t)=>{a.markup(`<div class="${P} ${t}"><div class="${x}"`).attr("title",e).attr("aria-label",e).markup("></div></div>")},i=(e,t,r,l,n,i,s,c=1)=>{let u=o+"colorPickerDetail_"+e;a.markup(`<div class="${D} ${n}"><label for="${u}" class="a-ColorPicker-detailLabel">${t}</label><input id="${u}" type="${l?"number":"text"}"`).optionalAttr("min",l?i:null).optionalAttr("max",l?s:null).optionalAttr("step",l?c:null).markup(`maxlength="${r}" size="5" class="apex-item-text ${q}"></div>`)},s=(e,t,o,r,l,a=1)=>{i(e,t,4,!0,o,r,l,a)};return"FULL"===this.displayMode&&(l="a-ColorPicker--full"),a.markup(`<div class="a-ColorPicker ${l}" data-oj-binding-provider="none"><div class="a-ColorPicker-spectrum"><oj-color-spectrum id="${o}jetColorSpectrum" class="color-spectrum"></oj-color-spectrum></div><div class="a-ColorPicker-previews">`),n(Q("CURRENT"),S),n(Q("INITIAL"),_),e=H+" "+k,a.markup(`</div><div class="a-ColorPicker-details"><div class="${e} ${B}" data-format="${this.showAlpha?h:p}">`),s("RGB_R","R","a-ColorPicker-detailItem--r","0","255"),s("RGB_G","G","a-ColorPicker-detailItem--g","0","255"),s("RGB_B","B","a-ColorPicker-detailItem--b","0","255"),this.showAlpha&&s("RGB_A","A",T,"0","1","0.01"),a.markup(`</div><div class="${e} ${V}" data-format="${this.showAlpha?f:C}">`),s("HSL_H","H","a-ColorPicker-detailItem--h","0","360"),s("HSL_S","S","a-ColorPicker-detailItem--s","0","100"),s("HSL_L","L","a-ColorPicker-detailItem--l","0","100"),this.showAlpha&&s("HSL_A","A",T,"0","1","0.01"),a.markup(`</div><div class="${e} ${E}" data-format="${d}">`),i("HEX","Hex",7,!1,"a-ColorPicker-detailItem--hex"),t=Q("TOGGLE_TITLE"),a.markup(`</div><button type="button" title="${t}" aria-label="${t}"class="a-Button ${O}"><span aria-hidden="true" class="a-Icon icon-colorpicker-select"></span></button></div>`),this.contrastCheck&&a.markup(Z()),this.presetColors&&(this.colorPresetsMenuItems=te(a,this.idPrefix,this.presetColors,this.maxPresetColors)),a.markup("</div>"),a.toString()}};function le(e){let o=Object.create(re);return t.extend(o,e),o.ojColorInitial=null,o.ojColorCurrent=null,o}let ae=null;function ne(e){let t=new e.ColorConverter({format:"hsl"}),o=new e.ColorConverter({format:"hex"}),r=new e.ColorConverter({format:"rgb"});function l(t){let o,r=t.toUpperCase(),l=Y(t);if(e.Color[r])o=e.Color[r];else{l.length&&(t=l);try{o=new e.Color(t)}catch(e){o=null}}return o}function a(e){let t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function n(e){let t=e.getRed(),o=e.getGreen(),r=e.getBlue();return.2126*a(t)+.7152*a(o)+.0722*a(r)}ae={makeColor:function(t){return new e.Color(t)},colorConverterHEX:o,colorConverterHSL:t,colorConverterRGB:r,getValidColor:l,getColorContrast:function(e,t){if(!e||!t)return null;let o=l(e),r=l(t);if(!o||!r)return null;let a=n(o),i=n(r),s=a>i?(a+.05)/(i+.05):(i+.05)/(a+.05);return{color_1:o.toString(),color_2:r.toString(),ratio:s,aa_large:s>3,aa_small:s>4.5,aaa_large:s>4.5,aaa_small:s>7}},getReturnColorString:function(e,l){let a;switch([d,p,C].includes(e)&&(l._a=1),e){case d:a=o.format(l);break;case p:case h:a=r.format(l);break;case C:case f:a=t.format(l);break;case m:a=l.toString()}return a},ojColorToHSL:function(e){let o,r=t.format(e);return o=U.exec(r)||[],{h:o[1],s:o[2],l:o[3],a:o[4]||"1"}},whenReady:function(t){return e.Context.getContext(t).getBusyContext().whenReady()}}}function ie(e){e.closest(".apex-item-group.apex-item-group--color-picker")}t((()=>{"undefined"!=typeof require&&require(["ojs/ojcore","jquery","ojs/ojconverter-color","ojs/ojcolor","ojs/ojcolorspectrum","ojs/ojvalidation-base"],(function(e){ae||ne(e)}))}));let se=(e,t)=>{let o,r,a=e.element;if(r=t=t.trim(),ae&&(e._color=o=ae.getValidColor(t)),!ae||e._displayAs===u)return void a.val(t);e._returnAs!==m&&o&&(r=ae.getReturnColorString(e._returnAs,o));let n=e.element.parent().find("."+j);if(o?n.removeClass(I).css(M,o.toString()):n.addClass(I).css(M,""),a[0].setCustomValidity(""),""===t)a.val(t);else{let t,n=e._returnAs===m||null!==o;a.val(r),n||(t=l.formatMessage("APEX.COLOR_PICKER.INVALID_COLOR",g[e._returnAs]),a[0].setCustomValidity(t))}},ce={item_type:"COLOR_PICKER",delayLoading:!0,enable:function(){this.element.parent().find("input, button, oj-color-spectrum").prop(v,!1),this.element.filter(".apex-item-text").removeClass("apex_disabled")},disable:function(){this.element.parent().find("input, button, oj-color-spectrum").prop(v,!0),this.element.filter(".apex-item-text").addClass("apex_disabled")},isDisabled:function(){return this.element.prop(v)},show:function(){ie(this.element).show()},hide:function(){ie(this.element).hide()},setValue:function(e,t,o){se(this,e),o||(this._preventChangeHandler=!0)},isChanged:function(){return this.node.value!==this._originalValue},getValue:function(){return this.element.val()},displayValueFor:function(e){let t,o="",l="",a=this.isReady()?ae.getValidColor(e):"";return""===a?t=e:a&&(t=a.toString()),t?l=M+":"+t+";":o=" "+I,`<div class="apex-item-group apex-item-group--color-picker">\n<span class="${j}${o}" style="${l}"></span>\n<span class="apex-item-color-picker-value">${r.escapeHTML(e)}</span></div>`},setFocusTo:function(){let e=this.element;return this._displayAs===i?e=e.parent().find("oj-color-spectrum"):this._displayAs===c&&(e=this.element.next()),e},getPopupSelector:function(){return".ui-dialog-color-picker"},getNativeValue:function(){return this._color},contrastWith:function(t){return ae?(t||(this._contrastItem?t=e(this._contrastItem).getValue():this._contrastColor&&(t=this._contrastColor)),ae.getColorContrast(this.getValue(),t)):null}};e.addAttachHandler((function(n){t(".apex-item-color-picker",n).each(((n,g)=>{let v,k,P,S,_,x,w=g.id,b=w+"_",y=t(g),A=(y.attr("data-display-as")||s).toUpperCase(),L=(y.attr("data-return-value-as")||d).toUpperCase(),R=y.attr("data-contrast-item")||null,I=y.attr("data-contrast-color")||null,H=R||I,B=y.attr("data-colors")||"",V="true"===(y.attr("data-colors-inline")||"").toLowerCase(),E=y.attr("data-max-colors"),D=y.attr("data-popup-class")||"",T=(y.attr("data-display-mode")||"SIMPLE").toUpperCase(),q=[h,f].includes(L),O=!1,G=!1;function N(){O=!0,x=function(e,o,n){let i,s,c,u=e.element;const p=o.idPrefix+"ColorPickerDlg";function h(e){let t=o.returnAs;return t===m&&(t=i.getCurrentFormat()||d),ae.getReturnColorString(t,e)}let C=t("#"+r.escapeCSS(p));if(u.attr($,"true"),C[0])C.popup("open");else{let r={closeText:l.getMessage("APEX.DIALOG.CLOSE"),title:Q("TITLE"),noOverlay:!0,width:"auto",height:"auto",dialogClass:"ui-dialog-color-picker"+(o.popupClass?" "+o.popupClass:""),parentElement:u.parent(),close:function(){let t,r=i.getColor();o.returnAs===m&&r.isEqual(c)?e.setValue(s,null,!0):(t=h(r),t!==s&&e.setValue(t)),u.attr($,"false"),n(t)},create:function(){i.initialize(C),C.closest(".ui-dialog").on("keydown",(e=>{e.which===a.ENTER&&"BUTTON"!==e.target.nodeName&&(e.preventDefault(),C.popup("close"))}))},open:function(){s=e.getValue(),i.setColor(s,!0),c=i.getColor()}},d=t.extend({},o,{getContrast:function(){return e.contrastWith()},valueChanged:function(t){e.setValue(h(t),null,!0),e.element.trigger("transientchange")}});C=t(`<div id="${p}" class='a-ColorPicker-dialog'></div>`),t("body").append(C),i=le(d),i.render().then((()=>{C.popup(r)}))}return p}(v,{idPrefix:b,presetColors:V?"":B,maxPresetColors:E,popupClass:D,returnAs:L,showAlpha:q,displayMode:T,contrastCheck:H},(()=>{O=!1}))}function M(){let e;v.isReady()?N():(r.delayLinger.start(b,(()=>{e=r.showSpinner(S)})),v.whenReady().then((()=>{N(),r.delayLinger.finish(b,(()=>{e.remove()}))})))}function U(e){e.click((function(){G||M(),G=!1})).mousedown((function(){O&&(G=!0)})),function(e,t){let o=new MutationObserver((function(r){r.filter((e=>"childList"===e.type&&e.removedNodes.length>0)).length>0&&(e.closest("html")||(o.disconnect(),t()))}));o.observe(document.body,{subtree:!0,childList:!0})}(y[0],(()=>{x&&t("#"+r.escapeCSS(x)).popup("destroy").closest(".ui-dialog--popup").remove()}))}switch([d,h,f,p,C,m].includes(L)||(o.warn("Color Picker invalid return value as: ",L),L=d),["FULL","SIMPLE"].includes(T)||o.warn("Color Picker invalid display mode: ",T),E?(E=parseInt(E,10),isNaN(E)&&(E=5)):E=5,A){case s:k="text",y.before(`<span class="${j}"></span>`).after('<button aria-hidden="true" type="button" class="a-Button a-Button--colorPicker" tabindex="-1"><span class="a-Icon icon-color-picker"></span></button>');break;case c:k="hidden",y.after(`<button type="button" class="a-Button a-Button--colorPicker a-Button--colorPickerOnly"><span class="${j}"></span></button>`);break;case i:k="hidden",S=t('<div class="a-ColorPicker-inlineWrap"></div>'),y.after(S),S=y.next(".a-ColorPicker-inlineWrap");break;case u:k="color";break;default:o.error("Color Picker invalid display-as ",A)}y.attr("type",k);let F=e.create(w,ce);switch(v=e(w),v._originalValue=y.val(),v._color=null,v._contrastItem=R,v._contrastColor=I,v._returnAs=L,v._displayAs=A,A===u?F.resolve():((e,t)=>{require(["ojs/ojcore","jquery","ojs/ojconverter-color","ojs/ojcolor","ojs/ojcolorspectrum","ojs/ojvalidation-base"],(function(o){ae||ne(o),se(t,y.val()),e.resolve()}))})(F,v),A){case s:P=y.next(".a-Button--colorPicker"),y.keydown((function(e){let t=e.which;t===a.DOWN||t===a.UP?(M(),e.preventDefault()):t===a.ENTER&&e.preventDefault()})),y.change((()=>{v._preventChangeHandler?v._preventChangeHandler=!1:se(v,y.val())})),U(P),P.focus((function(){y.focus()})),V&&B&&v.whenReady().then((()=>{let e=r.htmlBuilder(),t=te(e,b,B,E);P.after(e.toString()),y.parent().addClass("a-ColorPicker--hasPresets"),oe(b,t,(function(e){v.setValue(e)}))}));break;case c:P=y.next(".a-Button--colorPicker"),U(P);break;case i:r.delayLinger.start(b,(()=>{_=r.showSpinner(S)})),v.whenReady().then((()=>{let e=le({idPrefix:b,presetColors:B,maxPresetColors:E,returnAs:L,showAlpha:q,displayMode:T,contrastCheck:H,getContrast:function(){return v.contrastWith()},valueChanged:function(e){v.setValue(ae.getReturnColorString(L,e),null,!0),v.element.trigger("change")}});e.render().then((()=>{e.initialize(S),e.setColor(v.getValue(),!0),r.delayLinger.finish(b,(()=>{_.remove()}))}));let t=v.setValue;v.setValue=function(o,r,l){t.call(this,o,r,l),e.setColor(v.getValue())}}))}}))}))}(apex.item,apex.jQuery,apex.debug,apex.util,apex.lang);